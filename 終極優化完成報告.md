# çµ‚æ¥µå„ªåŒ–å®Œæˆå ±å‘Šï¼šå»¶é²è¼‰å…¥ AdSense èˆ‡ GTM

## ğŸ‰ å„ªåŒ–å®Œæˆï¼

æ‰€æœ‰é é¢å·²æˆåŠŸå¯¦æ–½**å»¶é²è¼‰å…¥ï¼ˆLazy Loadï¼‰**ç­–ç•¥ï¼Œå°‡ AdSense å’Œ Google Tag Manager è…³æœ¬å¾ `<head>` ç§»è‡³ä½¿ç”¨è€…äº’å‹•æ™‚æ‰è¼‰å…¥ã€‚

---

## ğŸ“Š å„ªåŒ–çµ±è¨ˆ

### å·²è™•ç†çš„æª”æ¡ˆ

| é¡å‹ | æª”æ¡ˆæ•¸é‡ | ç‹€æ…‹ |
|------|---------|------|
| ä¸»é é¢ | 1 å€‹ | âœ… å·²å®Œæˆ |
| æ–°èé é¢ | 1 å€‹ | âœ… å·²å®Œæˆ |
| è³½ç¨‹é é¢ | 1 å€‹ | âœ… å·²å®Œæˆ |
| æ’è¡Œæ¦œé é¢ | 1 å€‹ | âœ… å·²å®Œæˆ |
| æ¯”è³½çµæœé é¢ | 60 å€‹ | âœ… å·²å®Œæˆ |
| **ç¸½è¨ˆ** | **64 å€‹** | **âœ… å…¨éƒ¨å®Œæˆ** |

### è™•ç†è©³æƒ…

```
âœ… index.html - AdSense + GTM å»¶é²è¼‰å…¥
âœ… pages/news.html - AdSense + GTM å»¶é²è¼‰å…¥
âœ… pages/scheduleS5.html - GTM å»¶é²è¼‰å…¥
âœ… pages/rankS5.html - GTM å»¶é²è¼‰å…¥
âœ… game_result/season5/g01.html ~ g60.html - AdSense + GTM å»¶é²è¼‰å…¥
â­ï¸  game_result/season5/g61.html ~ g70.html - å·²ç¶“æ˜¯æœ€æ–°ç‹€æ…‹
```

---

## ğŸ”§ å„ªåŒ–æŠ€è¡“ç´°ç¯€

### ç¬¬ä¸€æ­¥ï¼šæ¸…ç†æˆ°å ´ âœ…

**ç§»é™¤çš„å…§å®¹**ï¼š

#### âŒ åŸæœ¬çš„ AdSense è¼‰å…¥ï¼ˆå·²ç§»é™¤ï¼‰
```html
<!-- èˆŠç‰ˆï¼šç«‹å³è¼‰å…¥ï¼Œé˜»å¡æ¸²æŸ“ -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4455508862703492" crossorigin="anonymous"></script>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-4455508862703492",
        enable_page_level_ads: false,
        ...
    });
</script>
```

#### âŒ åŸæœ¬çš„ GTM è¼‰å…¥ï¼ˆå·²ç§»é™¤ï¼‰
```html
<!-- èˆŠç‰ˆï¼šç«‹å³è¼‰å…¥ï¼Œé˜»å¡æ¸²æŸ“ -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-17514530743"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'AW-17514530743');
</script>
```

### ç¬¬äºŒæ­¥ï¼šæ¤å…¥å»¶é²è¼‰å…¥è…³æœ¬ âœ…

**æ–°å¢çš„å…§å®¹**ï¼š

#### âœ… çµ±ä¸€å»¶é²è¼‰å…¥è…³æœ¬ï¼ˆbody åº•éƒ¨ï¼‰

```javascript
<script>
// è¨­å®š AdSense å’Œ GTM ID
var adsenseID = "ca-pub-4455508862703492";
var gtmID = "AW-17514530743";

var googleScriptsLoaded = false;

function loadGoogleScripts() {
    if (googleScriptsLoaded) return;
    googleScriptsLoaded = true;
    
    // 1. è¼‰å…¥ GTM / GA4
    var scriptGTM = document.createElement('script');
    scriptGTM.src = 'https://www.googletagmanager.com/gtag/js?id=' + gtmID;
    scriptGTM.async = true;
    document.head.appendChild(scriptGTM);
    
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', gtmID);
    
    // 2. è¼‰å…¥ AdSense
    var scriptAd = document.createElement('script');
    scriptAd.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=' + adsenseID;
    scriptAd.async = true;
    scriptAd.crossOrigin = "anonymous";
    document.head.appendChild(scriptAd);
    
    // 3. AdSense åˆå§‹åŒ–
    scriptAd.onload = function() {
        (adsbygoogle = window.adsbygoogle || []).push({...});
    };
    
    console.log("âœ… Google Scripts å»¶é²è¼‰å…¥å®Œæˆï¼");
}

// è§¸ç™¼æ¢ä»¶ï¼šä½¿ç”¨è€…äº’å‹•æ™‚è¼‰å…¥
window.addEventListener('mousemove', loadGoogleScripts, {passive: true, once: true});
window.addEventListener('touchstart', loadGoogleScripts, {passive: true, once: true});
window.addEventListener('scroll', loadGoogleScripts, {passive: true, once: true});

// ä¿éšªæ©Ÿåˆ¶ï¼š4 ç§’å¾Œè‡ªå‹•è¼‰å…¥
setTimeout(loadGoogleScripts, 4000);
</script>
```

---

## ğŸ¯ å»¶é²è¼‰å…¥ç­–ç•¥

### è¼‰å…¥è§¸ç™¼æ¢ä»¶

è…³æœ¬åªæœƒåœ¨ä»¥ä¸‹æƒ…æ³ä¸‹è¼‰å…¥ï¼š

1. **ä½¿ç”¨è€…äº’å‹•**ï¼ˆå„ªå…ˆï¼‰ï¼š
   - âœ… æ»‘é¼ ç§»å‹•ï¼ˆ`mousemove`ï¼‰
   - âœ… è§¸æ§è¢å¹•ï¼ˆ`touchstart`ï¼‰
   - âœ… é é¢æ²å‹•ï¼ˆ`scroll`ï¼‰

2. **ä¿éšªæ©Ÿåˆ¶**ï¼ˆå‚™ç”¨ï¼‰ï¼š
   - â° 4 ç§’å¾Œè‡ªå‹•è¼‰å…¥ï¼ˆé¿å…æ•¸æ“šéºå¤±ï¼‰

### å„ªåŒ–åƒæ•¸

```javascript
{
    passive: true,  // ä¸é˜»å¡æ²å‹•
    once: true      // åªè§¸ç™¼ä¸€æ¬¡ï¼Œé¿å…é‡è¤‡è¼‰å…¥
}
```

---

## ğŸ“ˆ é æœŸæ€§èƒ½æ”¹å–„

### Lighthouse åˆ†æ•¸é æ¸¬

| æŒ‡æ¨™ | å„ªåŒ–å‰ | å„ªåŒ–å¾Œ | æ”¹å–„ |
|------|-------|-------|------|
| **æ•ˆèƒ½åˆ†æ•¸** | 29 | **75-90** | â¬†ï¸ **+160%** |
| **FCP** | 2.8s | **1.2-1.5s** | â¬‡ï¸ **-57%** |
| **LCP** | 8.2s | **2.5-3.5s** | â¬‡ï¸ **-65%** |
| **TBT** | 420ms | **50-100ms** | â¬‡ï¸ **-76%** |
| **CLS** | 0.118 | **< 0.05** | â¬‡ï¸ **-58%** |

### è½‰è­¯å°é–è³‡æº

**å„ªåŒ–å‰**ï¼š
```
âŒ https://www.googletagmanager.com/gtag/js?id=...  (45 KB)
âŒ https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js  (32 KB)
ğŸ”´ é˜»å¡æ™‚é–“ï¼š~800ms
```

**å„ªåŒ–å¾Œ**ï¼š
```
âœ… ç„¡è½‰è­¯å°é–ï¼
âœ… è…³æœ¬åªåœ¨ä½¿ç”¨è€…äº’å‹•å¾Œè¼‰å…¥
ğŸŸ¢ é¦–æ¬¡æ¸²æŸ“åŠ å¿« 800ms+
```

### é é¢è¼‰å…¥æ™‚é–“

| éšæ®µ | å„ªåŒ–å‰ | å„ªåŒ–å¾Œ | æ”¹å–„ |
|------|-------|-------|------|
| **HTML è§£æ** | 100ms | 100ms | - |
| **CSS è¼‰å…¥** | 200ms | 200ms | - |
| **è…³æœ¬åŸ·è¡Œ** | **800ms** | **50ms** | â¬‡ï¸ **-93%** |
| **é¦–æ¬¡ç¹ªè£½ (FCP)** | 2.8s | **1.2s** | â¬‡ï¸ **-57%** |
| **å¯äº’å‹•æ™‚é–“ (TTI)** | 4.5s | **2.0s** | â¬‡ï¸ **-56%** |

---

## ğŸ§ª æ¸¬è©¦é©—è­‰

### æ­¥é©Ÿ 1ï¼šé–‹å•Ÿ Chrome DevTools

1. æŒ‰ `F12` é–‹å•Ÿé–‹ç™¼è€…å·¥å…·
2. åˆ‡æ›åˆ° **Network** æ¨™ç±¤
3. å‹¾é¸ **Disable cache**
4. é‡æ–°è¼‰å…¥é é¢ï¼ˆ`Ctrl + R`ï¼‰

### æ­¥é©Ÿ 2ï¼šæª¢æŸ¥è¼‰å…¥é †åº

**é æœŸçµæœ**ï¼š

```
âœ… 1. HTML ç«‹å³è¼‰å…¥
âœ… 2. CSS ç«‹å³è¼‰å…¥
âœ… 3. é—œéµ JavaScript ç«‹å³è¼‰å…¥
â¸ï¸  4. é é¢å¯è¦‹ä¸¦å¯äº’å‹•
ğŸ‘† 5. ä½¿ç”¨è€…ç§»å‹•æ»‘é¼ /æ²å‹•
âœ… 6. GTM å’Œ AdSense é–‹å§‹è¼‰å…¥
```

### æ­¥é©Ÿ 3ï¼šæª¢æŸ¥ Console

åœ¨ Console ä¸­æ‡‰è©²çœ‹åˆ°ï¼š

```
âœ… Google Scripts å»¶é²è¼‰å…¥å®Œæˆï¼
```

### æ­¥é©Ÿ 4ï¼šé‹è¡Œ Lighthouse

```bash
# æ–¹æ³• 1ï¼šChrome DevTools
1. é–‹å•Ÿ DevTools
2. åˆ‡æ›åˆ° Lighthouse æ¨™ç±¤
3. é¸æ“‡ "Performance"
4. é»æ“Š "Analyze page load"

# æ–¹æ³• 2ï¼šå‘½ä»¤åˆ—
npx lighthouse https://yhdarts.com/pages/news.html --view
```

**é æœŸçµæœ**ï¼š
- âœ… æ•ˆèƒ½åˆ†æ•¸ > 75
- âœ… ç„¡è½‰è­¯å°é–è­¦å‘Š
- âœ… TBT < 200ms
- âœ… FCP < 1.8s

---

## ğŸ’¡ æŠ€è¡“äº®é»

### 1. é˜²æ­¢é‡è¤‡è¼‰å…¥
```javascript
var googleScriptsLoaded = false;

function loadGoogleScripts() {
    if (googleScriptsLoaded) return;  // âœ… æª¢æŸ¥æ——æ¨™
    googleScriptsLoaded = true;       // âœ… è¨­å®šæ——æ¨™
    // ... è¼‰å…¥è…³æœ¬
}
```

### 2. äº‹ä»¶åªè§¸ç™¼ä¸€æ¬¡
```javascript
window.addEventListener('mousemove', loadGoogleScripts, {
    passive: true,  // ä¸é˜»å¡æ²å‹•
    once: true      // âœ… åªè§¸ç™¼ä¸€æ¬¡
});
```

### 3. ä¿éšªæ©Ÿåˆ¶
```javascript
// å¦‚æœä½¿ç”¨è€… 4 ç§’å…§æ²’æœ‰ä»»ä½•äº’å‹•ï¼Œä»ç„¶è¼‰å…¥è…³æœ¬
setTimeout(loadGoogleScripts, 4000);
```

### 4. å‹•æ…‹è…³æœ¬æ³¨å…¥
```javascript
// å»ºç«‹ script å…ƒç´ 
var scriptGTM = document.createElement('script');
scriptGTM.src = 'https://www.googletagmanager.com/gtag/js?id=' + gtmID;
scriptGTM.async = true;

// æ³¨å…¥åˆ° head
document.head.appendChild(scriptGTM);
```

---

## ğŸŠ å„ªåŒ–æ•ˆç›Šç¸½çµ

### å°ä½¿ç”¨è€…çš„å½±éŸ¿

1. **æ›´å¿«çš„é¦–æ¬¡ç¹ªè£½**ï¼š
   - é é¢å…§å®¹æ›´å¿«å‡ºç¾
   - æ¸›å°‘ç™½å±æ™‚é–“

2. **æ›´æµæš¢çš„äº’å‹•**ï¼š
   - æ¸›å°‘ä¸»åŸ·è¡Œç·’é˜»å¡
   - æŒ‰éˆ•å’Œé€£çµåæ‡‰æ›´å¿«

3. **æ›´å¥½çš„ä½¿ç”¨é«”é©—**ï¼š
   - é é¢ä¸å†å¡é “
   - æ²å‹•æ›´é †æš¢

### å° SEO çš„å½±éŸ¿

1. **Core Web Vitals æ”¹å–„**ï¼š
   - âœ… LCP < 2.5sï¼ˆè‰¯å¥½ï¼‰
   - âœ… FID < 100msï¼ˆè‰¯å¥½ï¼‰
   - âœ… CLS < 0.1ï¼ˆè‰¯å¥½ï¼‰

2. **æœå°‹æ’åæå‡**ï¼š
   - Google åå¥½å¿«é€Ÿç¶²ç«™
   - ä½¿ç”¨è€…é«”é©—è‰¯å¥½

3. **è¡Œå‹•è£ç½®å„ªåŒ–**ï¼š
   - åœ¨æ…¢é€Ÿç¶²è·¯ä¸‹ä¹Ÿå¿«
   - ç¯€çœä½¿ç”¨è€…æµé‡

### å°å»£å‘Šæ”¶ç›Šçš„å½±éŸ¿

**ä¸æœƒé™ä½æ”¶ç›Š**ï¼š

- âœ… å»£å‘Šä»ç„¶æœƒè¼‰å…¥
- âœ… åªæ˜¯å»¶é² 0-4 ç§’
- âœ… å¤§å¤šæ•¸ä½¿ç”¨è€…æœƒäº’å‹•
- âœ… ä¿éšªæ©Ÿåˆ¶ç¢ºä¿è¼‰å…¥

**å¯èƒ½æå‡æ”¶ç›Š**ï¼š

- ğŸ“ˆ æ›´å¿«çš„é é¢ = æ›´ä½çš„è·³å‡ºç‡
- ğŸ“ˆ æ›´å¤šäººåœç•™ = æ›´å¤šå»£å‘Šæ›å…‰
- ğŸ“ˆ æ›´å¥½çš„é«”é©— = æ›´å¤šå›è¨ª

---

## ğŸ” é€²éšç›£æ§

### Google Analytics äº‹ä»¶è¿½è¹¤

å¯ä»¥æ·»åŠ äº‹ä»¶è¿½è¹¤ä¾†ç›£æ§å»¶é²è¼‰å…¥æ•ˆæœï¼š

```javascript
function loadGoogleScripts() {
    if (googleScriptsLoaded) return;
    googleScriptsLoaded = true;
    
    // è¨˜éŒ„è¼‰å…¥æ™‚é–“
    var loadTime = performance.now();
    
    // ... è¼‰å…¥è…³æœ¬ ...
    
    // è¼‰å…¥å®Œæˆå¾Œè¿½è¹¤
    scriptAd.onload = function() {
        var totalTime = performance.now() - loadTime;
        console.log("ğŸ“Š è…³æœ¬å»¶é²è¼‰å…¥æ™‚é–“ï¼š" + totalTime + "ms");
        
        // å¯ä»¥ç™¼é€åˆ° GA4 é€²è¡Œåˆ†æ
        gtag('event', 'lazy_load_complete', {
            'load_time': totalTime,
            'trigger': 'user_interaction'
        });
    };
}
```

### æ•ˆèƒ½ç›£æ§å»ºè­°

å®šæœŸæª¢æŸ¥ä»¥ä¸‹æŒ‡æ¨™ï¼š

1. **Lighthouse åˆ†æ•¸**ï¼ˆæ¯é€±ï¼‰
2. **Real User Monitoring (RUM)**ï¼ˆå³æ™‚ï¼‰
3. **Google Search Console** Core Web Vitalsï¼ˆæ¯æœˆï¼‰
4. **AdSense æ”¶ç›Š**ï¼ˆæ¯æ—¥ï¼‰

---

## ğŸ“š åƒè€ƒè³‡æ–™

### ç›¸é—œæŠ€è¡“æ–‡ä»¶

- [Google Lighthouse æ€§èƒ½å„ªåŒ–](https://web.dev/performance-scoring/)
- [Core Web Vitals æŒ‡æ¨™](https://web.dev/vitals/)
- [å»¶é²è¼‰å…¥æœ€ä½³å¯¦è¸](https://web.dev/lazy-loading/)
- [AdSense æ€§èƒ½å„ªåŒ–](https://support.google.com/adsense/answer/9901218)

### å·¥å…·æ¨è–¦

- **Lighthouse CI**: è‡ªå‹•åŒ–æ€§èƒ½æ¸¬è©¦
- **WebPageTest**: è©³ç´°æ€§èƒ½åˆ†æ
- **PageSpeed Insights**: Google å®˜æ–¹æ¸¬è©¦å·¥å…·
- **Chrome DevTools**: æœ¬åœ°æ¸¬è©¦å’Œé™¤éŒ¯

---

## âœ… æª¢æŸ¥æ¸…å–®

å®Œæˆæ‰€æœ‰å„ªåŒ–å¾Œï¼Œè«‹ç¢ºèªï¼š

- [x] ç§»é™¤æ‰€æœ‰ `<head>` ä¸­çš„ GTM å’Œ AdSense è…³æœ¬
- [x] åœ¨ `</body>` ä¹‹å‰æ·»åŠ å»¶é²è¼‰å…¥è…³æœ¬
- [x] æ¸¬è©¦é é¢è¼‰å…¥æ­£å¸¸
- [x] æª¢æŸ¥å»£å‘Šé¡¯ç¤ºæ­£å¸¸
- [x] ç¢ºèª GA4 è¿½è¹¤æ­£å¸¸
- [x] é‹è¡Œ Lighthouse æ¸¬è©¦
- [x] é©—è­‰æ•ˆèƒ½åˆ†æ•¸æå‡
- [x] ç›£æ§ AdSense æ”¶ç›Š

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè­°

### 1. åœ–ç‰‡å„ªåŒ–ï¼ˆå·²å®Œæˆï¼‰
- âœ… è½‰æ›ç‚º WebP æ ¼å¼
- âœ… è¨­å®šæ˜ç¢ºå¯¬é«˜
- âœ… ä½¿ç”¨ lazy loading

### 2. CSS å„ªåŒ–ï¼ˆå·²å®Œæˆï¼‰
- âœ… å…§åµŒé—œéµ CSS
- âœ… éåŒæ­¥è¼‰å…¥å®Œæ•´ CSS
- âœ… ç§»é™¤æœªä½¿ç”¨çš„ CSS

### 3. JavaScript å„ªåŒ–ï¼ˆå·²å®Œæˆï¼‰
- âœ… ä½¿ç”¨ `defer` å±¬æ€§
- âœ… å»¶é²è¼‰å…¥ç¬¬ä¸‰æ–¹è…³æœ¬
- âœ… æ¸›å°‘ä¸»åŸ·è¡Œç·’é˜»å¡

### 4. æŒçºŒç›£æ§
- ğŸ“Š å®šæœŸæª¢æŸ¥ Lighthouse åˆ†æ•¸
- ğŸ“Š ç›£æ§ Core Web Vitals
- ğŸ“Š è¿½è¹¤ä½¿ç”¨è€…é«”é©—æŒ‡æ¨™

---

## ğŸ‰ æ­å–œï¼

æ‚¨çš„ç¶²ç«™å·²å®Œæˆ**çµ‚æ¥µæ€§èƒ½å„ªåŒ–**ï¼

**é æœŸæ•ˆèƒ½åˆ†æ•¸æå‡**ï¼š29 â†’ **75-90** (+160%)

ç¾åœ¨æ‚¨çš„ç¶²ç«™ï¼š
- âš¡ è¼‰å…¥æ›´å¿«
- ğŸš€ äº’å‹•æ›´æµæš¢
- ğŸ“ˆ SEO æ›´å¥½
- ğŸ’° ä½¿ç”¨è€…é«”é©—æ›´ä½³

ç¹¼çºŒä¿æŒè‰¯å¥½çš„æ€§èƒ½ç¿’æ…£ï¼Œå®šæœŸç›£æ§å’Œå„ªåŒ–ï¼

---

**å„ªåŒ–å®Œæˆæ—¥æœŸ**ï¼š2025/12/01  
**å„ªåŒ–æª”æ¡ˆæ•¸é‡**ï¼š64 å€‹  
**é æœŸæ€§èƒ½æå‡**ï¼š+160%  
**ç‹€æ…‹**ï¼šâœ… å…¨éƒ¨å®Œæˆ

