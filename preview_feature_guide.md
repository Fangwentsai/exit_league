# 🎮 比賽結果預覽功能 - 使用指南

## 📖 功能概述

這是一個**折衷方案**，讓使用者在保存比賽資料前，可以先預覽最終的比賽結果頁面會是什麼樣子。預覽採用與 `game_result/season4/g01.html` 完全相同的格式和樣式。

## ✨ 主要特色

- 🎯 **完整預覽**：100% 還原最終比賽結果頁面
- 📊 **即時統計**：自動計算選手統計數據
- 🎨 **精美界面**：與原版格式完全一致
- ⚡ **快速響應**：即時生成，無需等待
- 🔄 **雙向操作**：可預覽後返回編輯或直接保存

---

## 🚀 如何使用

### 1️⃣ **進入管理後台**
- 開啟 `pages/admin.html`
- 使用 `root` / `root666` 登入

### 2️⃣ **選擇比賽**
- 從下拉選單選擇要編輯的比賽
- 系統會自動載入比賽資訊

### 3️⃣ **填寫比賽資料** 
- 選擇各SET的參賽選手
- 設定先攻方
- 記錄勝負結果
- 設定飲酒加成（如適用）

### 4️⃣ **點擊預覽按鈕**
- 在「保存比賽資料」按鈕旁邊
- 點擊 **🎮 預覽比賽結果** 按鈕

### 5️⃣ **查看預覽結果**
- 系統會開啟全螢幕預覽視窗
- 顯示完整的比賽結果頁面
- 包含所有統計數據和比分

### 6️⃣ **選擇後續動作**
- ✅ **確認並保存**：滿意就直接保存
- ✏️ **返回編輯**：需要修改就返回
- ❌ **取消**：關閉預覽

---

## 🎯 預覽內容包含

### 📋 **比賽基本資訊**
- 比賽日期和時間
- 比賽場地（根據主隊自動判斷）
- 隊伍名稱
- 最終比分（含飲酒加成）

### 🎮 **詳細賽局資料**
#### **個人賽 01** (SET 1-5)
- SET1: 501 (OI/MO)
- SET2: 501 (DI/DO) 
- SET3: 701 (OI/MO)
- SET4: 701 (OI/MO, 25/50)
- SET5: 三人賽 701

#### **Cricket Games** (SET 6-10)
- SET6-7: Cricket
- SET8-9: Random Cricket
- SET10: 三人賽 Cricket

#### **雙人賽** (SET 11-14)
- SET11: 701 雙人賽
- SET12: 701 雙人賽 FREEZE
- SET13: Cricket 雙人賽
- SET14: Team Cricket

#### **四人賽** (SET 15-16)
- SET15: 四人賽 1101
- SET16: 四人賽 Cricket

### 📊 **選手統計數據**
- 01出賽/勝場數
- CR出賽/勝場數
- 合計出賽/勝場數
- 先攻次數
- 勝率計算

---

## 💡 智慧功能

### 🔍 **自動數據驗證**
預覽前會檢查：
- 所有SET是否完成選手選擇
- 先攻設定是否完整
- 勝負結果是否已填
- 顯示完成度百分比

### 🏠 **場地自動判斷**
根據主隊自動設定比賽場地：
- **Jack** / **人生揪難** → Jack Bar
- **Vivi朝酒晚舞** → Vivi Bar
- **逃生入口A** → Escape Room A
- **逃生入口C** → Escape Room C
- **海盜揪硬** → Pirate Bar
- **一鏢開天門** → One Shot Bar
- **酒空組** → Air Bar

### 🎨 **視覺標示**
- 🟡 先攻隊伍（黃底顯示）
- 👑 獲勝隊伍（勝利圖示）
- 🍺 飲酒加成（自動計入總分）

---

## 🔧 技術細節

### 📁 **相關文件**
```
js/preview_generator.js     # 預覽生成核心
pages/admin.html           # 管理後台（已整合）
preview_test.html          # 功能測試頁面
```

### 🔗 **資料轉換流程**
```
Admin 數據格式
    ↓
數據格式驗證
    ↓  
轉換為 Match 格式
    ↓
生成 HTML 預覽
    ↓
顯示預覽窗口
```

### 🎯 **核心類別**
- `GameResultPreviewGenerator`: 主要生成器類別
- `generatePreviewHTML()`: HTML生成函數
- `showPreviewModal()`: 預覽視窗顯示

---

## 🧪 測試功能

### 📝 **使用測試頁面**
1. 開啟 `preview_test.html`
2. 點擊「🚀 測試預覽功能」
3. 查看 G45 的範例預覽
4. 測試各種操作按鈕

### 🔍 **測試用例**
- ✅ 完整資料預覽
- ✅ 部分資料預覽（含警告）
- ✅ 統計數據計算
- ✅ 飲酒加成計算
- ✅ 先攻顯示
- ✅ 勝負標示

---

## 🚨 注意事項

### ⚠️ **重要提醒**
- 預覽模式下數據**尚未保存**
- 必須點擊「確認並保存」才會真正保存
- 預覽功能需要完整的比賽資料才能準確顯示

### 🐛 **已知限制**
- 需要現代瀏覽器支援（ES6+）
- 大型比賽資料可能載入較慢
- 預覽視窗關閉後需重新生成

### 💾 **資料完整性**
建議在預覽前確保：
- [x] 所有16個SET都已填寫
- [x] 每個SET的選手數量正確
- [x] 先攻和勝負都已選擇
- [x] 飲酒加成設定正確

---

## 🎉 效果展示

### 📸 **預覽截圖說明**
```
┌─────────────────────────────────────┐
│  🎮 比賽結果預覽                      │
│  請確認以下資料正確後再進行保存          │
├─────────────────────────────────────┤
│  📋 這是預覽模式 - 資料尚未正式保存      │
├─────────────────────────────────────┤
│                                     │
│  2025/6/24 21:00                   │
│  Escape Room C                     │
│                                     │
│  逃生入口A    8 : 15   逃生入口C      │
│                                     │
│  [詳細賽局表格]                      │
│  [選手統計數據]                      │
│                                     │
├─────────────────────────────────────┤
│  ✅確認並保存  ✏️返回編輯  ❌取消      │
└─────────────────────────────────────┘
```

### 🚀 **優勢亮點**
- ⚡ **即時預覽**：無需等待，立即看到結果
- 🎯 **精確還原**：100%符合最終發布格式
- 🔄 **彈性操作**：可隨時返回修改
- 📊 **自動計算**：智慧統計和分數計算
- 💡 **直觀易用**：清楚的操作指引

---

## 🔮 未來擴展

### 🌟 **潛在改進**
- 📱 **行動版優化**：響應式預覽視窗
- 💾 **預覽保存**：可將預覽存為PDF
- 🔄 **版本比較**：與歷史版本對比
- 📧 **分享功能**：直接分享預覽連結
- 🎨 **主題選擇**：多種視覺主題

### 🚀 **整合計劃**
這個預覽功能為將來的完整自動化鋪路：
1. **當前階段**：手動預覽 → 手動保存
2. **下一階段**：預覽 → 一鍵發布到 GitHub
3. **最終目標**：預覽 → 自動發布 → 即時上線

---

*最後更新：2025年6月*  
*版本：v1.0 - 預覽功能初版* 