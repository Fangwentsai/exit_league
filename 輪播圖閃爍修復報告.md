# è¼ªæ’­åœ–é–ƒçˆå•é¡Œä¿®å¾©å ±å‘Š

## ğŸ”´ å•é¡Œæè¿°

ç”¨æˆ¶åæ˜ ï¼š
- âŒ è¼ªæ’­ç…§ç‰‡ä¸€é–‹å§‹æœƒé¡¯ç¤º
- âŒ ä½†ä¸€ä¸‹å°±æ¶ˆå¤±äº†ï¼Œç•«é¢è®Šç™½
- âŒ è¦ç­‰åˆ°ä¸‹ä¸€å¼µç…§ç‰‡é€²ä¾†æ‰æœƒå‡ºç¾ç…§ç‰‡

## ğŸ” å•é¡Œè¨ºæ–·

### æ ¹æœ¬åŸå› ï¼šCSS Transition åœ¨é é¢è¼‰å…¥æ™‚è§¸ç™¼

```css
/* å•é¡Œä»£ç¢¼ âŒ */
.carousel-image {
    transition: opacity 0.3s ease-in-out;  /* ç«‹å³å•Ÿç”¨ï¼ */
}

#carousel-image {
    opacity: 1;
}
```

**å•é¡Œæµç¨‹**ï¼š

```
1. HTML è¼‰å…¥
   - <img id="carousel-image" src="IMG_9918.webp">
   - opacity åˆå§‹å¯èƒ½æ˜¯ 0 æˆ–æœªå®šç¾©

2. CSS å¥—ç”¨
   - .carousel-image { transition: opacity 0.3s }
   - #carousel-image { opacity: 1 }

3. ç€è¦½å™¨åŸ·è¡Œéæ¸¡
   - å¾ opacity: 0 â†’ opacity: 1ï¼ˆ300ms éæ¸¡ï¼‰
   - æˆ–è€…å¾æŸå€‹ä¸­é–“ç‹€æ…‹é–‹å§‹éæ¸¡

4. çµæœ
   - åœ–ç‰‡å¯èƒ½é–ƒçˆ
   - æˆ–è€…å‡ºç¾ä¸è‡ªç„¶çš„æ·¡å…¥æ•ˆæœ
```

### ç‚ºä»€éº¼æœƒã€Œä¸€ä¸‹å°±æ¶ˆå¤±ã€ï¼Ÿ

å¯èƒ½çš„åŸå› ï¼š
1. **CSS è¼‰å…¥é †åºå•é¡Œ**
   - å¦‚æœ CSS çš„ä¸åŒè¦å‰‡è¼‰å…¥æ™‚æ©Ÿä¸åŒ
   - å¯èƒ½å…ˆå¥—ç”¨ `transition`ï¼Œå¾Œå¥—ç”¨ `opacity: 1`
   - å°è‡´éæ¸¡æ•ˆæœåœ¨ä¸é æœŸçš„æ™‚å€™è§¸ç™¼

2. **JavaScript åŸ·è¡Œæ™‚æ©Ÿ**
   - å¦‚æœ JavaScript åœ¨ CSS å®Œå…¨è¼‰å…¥å‰åŸ·è¡Œ
   - å¯èƒ½è®€å–åˆ°éŒ¯èª¤çš„ç‹€æ…‹

3. **åœ–ç‰‡è¼‰å…¥å»¶é²**
   - é›–ç„¶åœ–ç‰‡ src å·²è¨­å®šï¼Œä½†åœ–ç‰‡é‚„æ²’è¼‰å…¥å®Œæˆ
   - opacity å¾ 0 â†’ 1 çš„éæ¸¡å¯èƒ½åœ¨åœ–ç‰‡è¼‰å…¥å‰å°±å®Œæˆäº†

---

## âœ… è§£æ±ºæ–¹æ¡ˆ

### ç­–ç•¥ï¼šå»¶é²å•Ÿç”¨ Transition

**æ ¸å¿ƒåŸå‰‡**ï¼š
> é é¢è¼‰å…¥æ™‚ä¸è¦æœ‰ä»»ä½•éæ¸¡æ•ˆæœï¼Œç­‰ JavaScript åˆå§‹åŒ–å®Œæˆå¾Œå†å•Ÿç”¨ã€‚

### 1. CSS ä¿®æ”¹

```css
/* ç§»é™¤é»˜èªçš„ transition âœ… */
.carousel-image {
    width: 100%;
    height: 100%;
    /* ... å…¶ä»–å±¬æ€§ ... */
    /* ä¸è¦åœ¨é€™è£¡è¨­å®š transitionï¼ */
}

/* åªåœ¨æœ‰ class æ™‚æ‰å•Ÿç”¨ transition âœ… */
.carousel-image.transition-enabled {
    transition: opacity 0.3s ease-in-out;
}

/* ç¬¬ä¸€å¼µåœ–ç‰‡ç«‹å³é¡¯ç¤º */
#carousel-image {
    opacity: 1;  /* ç„¡éæ¸¡æ•ˆæœï¼Œç«‹å³é¡¯ç¤º */
    z-index: 2;
}
```

### 2. JavaScript ä¿®æ”¹

```javascript
// åˆå§‹åŒ–æ™‚å»¶é²å•Ÿç”¨éæ¸¡æ•ˆæœ
(function initCarousel() {
    // ... åˆå§‹åŒ–ä»£ç¢¼ ...
    
    // å»¶é² 100ms å¾Œæ‰å•Ÿç”¨éæ¸¡æ•ˆæœ âœ…
    setTimeout(() => {
        carouselImage.classList.add('transition-enabled');
        if (carouselImageNext) {
            carouselImageNext.classList.add('transition-enabled');
        }
    }, 100);
    
    // ... å…¶ä»–ä»£ç¢¼ ...
})();
```

### 3. å®‰å…¨æª¢æŸ¥

```javascript
// åˆ‡æ›å¹»ç‡ˆç‰‡æ™‚æª¢æŸ¥éæ¸¡æ˜¯å¦å·²å•Ÿç”¨
function goToSlide(index) {
    if (index === currentIndex) return;
    
    // ç¢ºä¿éæ¸¡æ•ˆæœå·²å•Ÿç”¨ âœ…
    if (!carouselImage.classList.contains('transition-enabled')) return;
    
    // åŸ·è¡Œæ·¡å…¥æ·¡å‡º...
}
```

---

## ğŸ“Š ä¿®æ”¹å°æ¯”

### CSS è®Šæ›´

| é …ç›® | ä¿®æ”¹å‰ | ä¿®æ”¹å¾Œ |
|------|-------|-------|
| **é»˜èª transition** | âœ… å•Ÿç”¨ | âŒ ç§»é™¤ |
| **transition-enabled class** | âŒ ç„¡ | âœ… æ–°å¢ |
| **opacity åˆå§‹å€¼** | 1 | 1ï¼ˆä¿æŒï¼‰ |

```diff
.carousel-image {
-   transition: opacity 0.3s ease-in-out;
+   /* ç§»é™¤é»˜èª transition */
}

+ .carousel-image.transition-enabled {
+   transition: opacity 0.3s ease-in-out;
+ }
```

### JavaScript è®Šæ›´

```diff
(function initCarousel() {
    // ... åˆå§‹åŒ– ...
    
+   // å»¶é²å•Ÿç”¨éæ¸¡æ•ˆæœ
+   setTimeout(() => {
+       carouselImage.classList.add('transition-enabled');
+       if (carouselImageNext) carouselImageNext.classList.add('transition-enabled');
+   }, 100);
    
    // ... å…¶ä»–ä»£ç¢¼ ...
})();

function goToSlide(index) {
    if (index === currentIndex) return;
+   if (!carouselImage.classList.contains('transition-enabled')) return;
    
    // ... æ·¡å…¥æ·¡å‡ºé‚è¼¯ ...
}
```

---

## ğŸ¯ é æœŸæ•ˆæœ

### é é¢è¼‰å…¥æµç¨‹

```
âœ… æ­£ç¢ºçš„æµç¨‹ï¼š

1. HTML è¼‰å…¥
   - <img id="carousel-image" src="IMG_9918.webp" ...>

2. CSS å¥—ç”¨
   - opacity: 1ï¼ˆç«‹å³ç”Ÿæ•ˆï¼Œç„¡éæ¸¡ï¼‰
   - åœ–ç‰‡ç«‹å³å¯è¦‹ âœ…

3. JavaScript åŸ·è¡Œ
   - 100ms å¾Œæ·»åŠ  .transition-enabled

4. è‡ªå‹•æ’­æ”¾é–‹å§‹
   - 7 ç§’å¾Œåˆ‡æ›åˆ°ç¬¬äºŒå¼µ
   - æ·¡å‡º â†’ æ›´æ› src â†’ æ·¡å…¥ï¼ˆæœ‰éæ¸¡æ•ˆæœï¼‰âœ…
```

### ç”¨æˆ¶é«”é©—

| æ™‚é–“é» | è¡Œç‚º | ç‹€æ…‹ |
|--------|------|------|
| **0-0.1s** | é é¢è¼‰å…¥ï¼Œåœ–ç‰‡ç«‹å³é¡¯ç¤º | âœ… ç©©å®š |
| **0.1s** | å•Ÿç”¨éæ¸¡æ•ˆæœ | âœ… æº–å‚™å°±ç·’ |
| **0.1-7s** | ç¬¬ä¸€å¼µåœ–ç‰‡ç©©å®šé¡¯ç¤º | âœ… å®Œç¾ |
| **7s** | æ·¡å‡º â†’ åˆ‡æ› â†’ æ·¡å…¥ | âœ… æµæš¢ |
| **14s** | ç¹¼çºŒè¼ªæ’­... | âœ… æ­£å¸¸ |

---

## ğŸ§ª æ¸¬è©¦é©—è­‰

### æ¸¬è©¦ 1ï¼šé é¢è¼‰å…¥

```
æ­¥é©Ÿï¼š
1. æ¸…é™¤å¿«å–ï¼ˆCtrl+Shift+Rï¼‰
2. é‡æ–°è¼‰å…¥é é¢
3. âœ… æª¢æŸ¥ï¼šç¬¬ä¸€å¼µåœ–ç‰‡ç«‹å³é¡¯ç¤º
4. âœ… æª¢æŸ¥ï¼šæ²’æœ‰é–ƒçˆæˆ–æ¶ˆå¤±
5. âœ… æª¢æŸ¥ï¼šåœ–ç‰‡ä¿æŒç©©å®šé¡¯ç¤º
```

### æ¸¬è©¦ 2ï¼šè‡ªå‹•æ’­æ”¾

```
æ­¥é©Ÿï¼š
1. ç­‰å¾… 7 ç§’
2. âœ… æª¢æŸ¥ï¼šåœ–ç‰‡å¹³æ»‘æ·¡å‡º
3. âœ… æª¢æŸ¥ï¼šå‡ºç¾ç¬¬äºŒå¼µåœ–ç‰‡
4. âœ… æª¢æŸ¥ï¼šç¬¬äºŒå¼µåœ–ç‰‡å¹³æ»‘æ·¡å…¥
5. âœ… æª¢æŸ¥ï¼šåœ“é»æŒ‡ç¤ºå™¨æ­£ç¢ºæ›´æ–°
```

### æ¸¬è©¦ 3ï¼šæ‰‹å‹•åˆ‡æ›

```
æ­¥é©Ÿï¼š
1. é»æ“Šåœ“é»åˆ‡æ›åˆ°ç¬¬ 3 å¼µ
2. âœ… æª¢æŸ¥ï¼šæœ‰æ·¡å…¥æ·¡å‡ºæ•ˆæœ
3. âœ… æª¢æŸ¥ï¼šåˆ‡æ›æµæš¢
4. âœ… æª¢æŸ¥ï¼šæ²’æœ‰ç™½å±
```

### æ¸¬è©¦ 4ï¼šå¿«é€Ÿé€£çºŒé»æ“Š

```
æ­¥é©Ÿï¼š
1. å¿«é€Ÿé»æ“Šå¤šå€‹åœ“é»
2. âœ… æª¢æŸ¥ï¼šä¸æœƒå¡ä½
3. âœ… æª¢æŸ¥ï¼šæœ€çµ‚é¡¯ç¤ºæ­£ç¢ºçš„åœ–ç‰‡
4. âœ… æª¢æŸ¥ï¼šæ²’æœ‰éŒ¯èª¤
```

---

## ğŸ“š æŠ€è¡“ç´°ç¯€

### ç‚ºä»€éº¼å»¶é² 100msï¼Ÿ

```javascript
setTimeout(() => {
    carouselImage.classList.add('transition-enabled');
}, 100);
```

**åŸå› **ï¼š

1. **ç¢ºä¿ DOM å®Œå…¨æ¸²æŸ“**
   - 100ms è¶³å¤ è®“ç€è¦½å™¨å®Œæˆåˆå§‹æ¸²æŸ“
   - é¿å… CSS å’Œ DOM ç‹€æ…‹ä¸åŒæ­¥

2. **é¿å…åˆå§‹ reflow**
   - å¦‚æœç«‹å³æ·»åŠ  classï¼Œå¯èƒ½è§¸ç™¼ reflow
   - 100ms å»¶é²è®“ç€è¦½å™¨å®Œæˆä½ˆå±€è¨ˆç®—

3. **ç”¨æˆ¶ç„¡æ„ŸçŸ¥**
   - 100ms å°ç”¨æˆ¶ä¾†èªªæ„Ÿè¦ºä¸åˆ°
   - ä½†å°ç€è¦½å™¨ä¾†èªªè¶³å¤ å®Œæˆåˆå§‹åŒ–

### ç‚ºä»€éº¼éœ€è¦æª¢æŸ¥ transition-enabledï¼Ÿ

```javascript
function goToSlide(index) {
    if (!carouselImage.classList.contains('transition-enabled')) return;
    // ...
}
```

**åŸå› **ï¼š

1. **é˜²æ­¢éæ—©èª¿ç”¨**
   - å¦‚æœåœ¨ 100ms å…§å°±èª¿ç”¨ goToSlide
   - åœ–ç‰‡æœƒçªç„¶æ¶ˆå¤±ï¼ˆå› ç‚ºæ²’æœ‰éæ¸¡æ•ˆæœï¼‰

2. **ä¿è­·æ©Ÿåˆ¶**
   - å³ä½¿ä»£ç¢¼é‚è¼¯æœ‰å•é¡Œ
   - ä¹Ÿä¸æœƒå°è‡´åœ–ç‰‡æ¶ˆå¤±

3. **ä¸€è‡´æ€§**
   - ç¢ºä¿æ‰€æœ‰åˆ‡æ›éƒ½æœ‰éæ¸¡æ•ˆæœ
   - æˆ–è€…éƒ½æ²’æœ‰ï¼ˆåˆå§‹åŒ–éšæ®µï¼‰

### CSS Transition çš„æ™‚æ©Ÿå•é¡Œ

**å•é¡Œå ´æ™¯**ï¼š

```html
<img id="carousel-image" style="opacity: 0;">
<style>
    #carousel-image {
        transition: opacity 0.3s;
        opacity: 1;  /* å¾ 0 â†’ 1 æœƒè§¸ç™¼éæ¸¡ï¼ */
    }
</style>
```

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

```html
<img id="carousel-image" style="opacity: 1;">  <!-- ç›´æ¥è¨­å®šæœ€çµ‚å€¼ -->
<style>
    #carousel-image {
        /* ä¸è¦åœ¨é€™è£¡è¨­å®š transition */
        opacity: 1;
    }
    
    #carousel-image.transition-enabled {
        transition: opacity 0.3s;  /* ä¹‹å¾Œæ‰å•Ÿç”¨ */
    }
</style>
```

---

## ğŸ“ æœ€ä½³å¯¦è¸

### 1. é¿å…é é¢è¼‰å…¥æ™‚çš„éæ¸¡æ•ˆæœ

**åŸå‰‡**ï¼š
> åªåœ¨ç”¨æˆ¶äº’å‹•æˆ– JavaScript æ§åˆ¶æ™‚æ‰ä½¿ç”¨éæ¸¡æ•ˆæœã€‚

```css
/* âŒ éŒ¯èª¤ï¼šæ‰€æœ‰å…ƒç´ éƒ½æœ‰éæ¸¡ */
* {
    transition: all 0.3s;
}

/* âœ… æ­£ç¢ºï¼šæ˜ç¢ºæŒ‡å®šéœ€è¦éæ¸¡çš„å…ƒç´  */
.button:hover {
    transition: background-color 0.3s;
}

.modal.visible {
    transition: opacity 0.3s;
}
```

### 2. ä½¿ç”¨ JavaScript æ§åˆ¶éæ¸¡æ™‚æ©Ÿ

```javascript
// âœ… æ¨¡å¼ 1ï¼šå»¶é²æ·»åŠ  class
setTimeout(() => {
    element.classList.add('transition-enabled');
}, 100);

// âœ… æ¨¡å¼ 2ï¼šä½¿ç”¨ requestAnimationFrame
requestAnimationFrame(() => {
    requestAnimationFrame(() => {
        element.classList.add('fade-in');
    });
});

// âœ… æ¨¡å¼ 3ï¼šç­‰å¾…åœ–ç‰‡è¼‰å…¥
image.onload = () => {
    image.classList.add('loaded');
};
```

### 3. é¦–å±å…§å®¹çš„ LCP å„ªåŒ–

**é—œéµé»**ï¼š
1. âœ… é¦–åœ–ç›´æ¥åœ¨ HTML è¨­å®š src
2. âœ… è¨­å®š `loading="eager"`
3. âœ… è¨­å®š `fetchpriority="high"`
4. âœ… ä¸è¦æœ‰ä»»ä½•éæ¸¡æ•ˆæœ
5. âœ… CSS è¨­å®š `opacity: 1`ï¼ˆç«‹å³å¯è¦‹ï¼‰

```html
<!-- âœ… å®Œç¾çš„ LCP åœ–ç‰‡ -->
<img id="hero-image" 
     src="hero.webp" 
     loading="eager"
     fetchpriority="high"
     width="800"
     height="400"
     style="opacity: 1;">  <!-- ç«‹å³å¯è¦‹ -->
```

---

## ğŸ› é¿å…çš„é™·é˜±

### é™·é˜± 1ï¼šå…¨å±€ transition

```css
/* âŒ å±éšªï¼šå½±éŸ¿æ‰€æœ‰å…ƒç´  */
* {
    transition: all 0.3s;
}
```

**å•é¡Œ**ï¼š
- é é¢è¼‰å…¥æ™‚æ‰€æœ‰å…ƒç´ éƒ½æœƒæœ‰éæ¸¡æ•ˆæœ
- å¯èƒ½å°è‡´ FOUC (Flash of Unstyled Content)
- æ€§èƒ½å•é¡Œï¼ˆå¤ªå¤šå…ƒç´ åŒæ™‚å‹•ç•«ï¼‰

### é™·é˜± 2ï¼šç«‹å³åŸ·è¡Œå‹•ç•«

```javascript
// âŒ éŒ¯èª¤ï¼šç«‹å³åŸ·è¡Œ
element.style.opacity = '0';
element.style.opacity = '1';  // ä¸æœƒæœ‰éæ¸¡æ•ˆæœï¼

// âœ… æ­£ç¢ºï¼šåˆ†å…©å€‹ frame åŸ·è¡Œ
element.style.opacity = '0';
requestAnimationFrame(() => {
    element.style.opacity = '1';
});
```

### é™·é˜± 3ï¼šå¿˜è¨˜æ¸…ç†

```javascript
// âŒ éŒ¯èª¤ï¼štransition ä¸€ç›´å­˜åœ¨
element.classList.add('fade-out');

// âœ… æ­£ç¢ºï¼šå‹•ç•«å®Œæˆå¾Œæ¸…ç†
element.classList.add('fade-out');
element.addEventListener('transitionend', () => {
    element.classList.remove('fade-out');
}, { once: true });
```

---

## âœ… å®Œæˆç‹€æ…‹

| é …ç›® | ç‹€æ…‹ |
|------|------|
| ç§»é™¤é»˜èª transition | âœ… å®Œæˆ |
| æ·»åŠ  transition-enabled class | âœ… å®Œæˆ |
| å»¶é²å•Ÿç”¨éæ¸¡æ•ˆæœ | âœ… å®Œæˆ |
| æ·»åŠ å®‰å…¨æª¢æŸ¥ | âœ… å®Œæˆ |
| é˜²æ­¢åœ–ç‰‡æ¶ˆå¤± | âœ… å®Œæˆ |

---

## ğŸŠ ç¸½çµ

### å•é¡Œæ ¹æº
- CSS transition åœ¨é é¢è¼‰å…¥æ™‚ç«‹å³å•Ÿç”¨
- å°è‡´åœ–ç‰‡å‡ºç¾ä¸é æœŸçš„éæ¸¡æ•ˆæœ
- å¯èƒ½é€ æˆé–ƒçˆæˆ–æ¶ˆå¤±

### è§£æ±ºæ–¹æ¡ˆ
- ç§»é™¤é»˜èªçš„ transition
- JavaScript åˆå§‹åŒ–å¾Œå»¶é²å•Ÿç”¨
- æ·»åŠ å®‰å…¨æª¢æŸ¥æ©Ÿåˆ¶

### é—œéµæ”¹é€²
1. âœ… ç¬¬ä¸€å¼µåœ–ç‰‡ç«‹å³ç©©å®šé¡¯ç¤º
2. âœ… ç„¡é–ƒçˆæˆ–ç™½å±
3. âœ… è‡ªå‹•æ’­æ”¾æ­£å¸¸é‹ä½œ
4. âœ… åˆ‡æ›æµæš¢æœ‰éæ¸¡æ•ˆæœ

---

**ä¿®å¾©æ—¥æœŸ**ï¼š2025/12/01  
**å½±éŸ¿é é¢**ï¼špages/news.html  
**æ¸¬è©¦ç‹€æ…‹**ï¼šç­‰å¾…ç”¨æˆ¶é©—è­‰  
**é æœŸçµæœ**ï¼šè¼ªæ’­åœ–ç©©å®šé¡¯ç¤ºï¼Œç„¡é–ƒçˆå•é¡Œ

