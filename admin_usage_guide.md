# 🎯 難找的聯賽 - 管理後台使用教學

## 📖 系統概述

這是一個專為飛鏢比賽設計的管理後台系統，用於記錄比賽結果、選手出賽情況和計算總分。系統會自動處理比賽積分、勝場加成和飲酒加成。

---

## 🚀 快速開始

### 1. 登入系統
- 開啟 `pages/admin.html`
- 輸入帳號：`root`
- 輸入密碼：`root666`
- 點擊「登入」

### 2. 選擇比賽
- 系統會自動載入近期的比賽
- 從下拉選單中選擇要記錄的比賽
- 格式：G45 (6/24) - 逃生入口A vs 逃生入口C

---

## 🎮 主要功能說明

### 📋 比賽佈局
比賽分為 **16個SET**，每個SET有不同的遊戲類型：

| SET | 遊戲類型 | 需要選手數 |
|-----|----------|------------|
| SET1-4 | 501/701 個人賽 | 1人 |
| SET5, SET10 | 三人賽 | 3人 |
| SET6-9 | Cricket 個人賽 | 1人 |
| SET11-14 | 雙人賽 | 2人 |
| SET15-16 | 四人賽 | 4人 |

### ⚠️ 重要規則
- **SET1-4**：同一隊伍不能重複出場
- **SET6-9**：同一隊伍不能重複出場
- **SET11-12**：同一隊伍不能重複出場
- **SET13-14**：同一隊伍不能重複出場

---

## 🎯 操作步驟

### Step 1: 選擇選手
1. **點擊隊伍按鈕**（主場或客場）
2. **選擇選手**：
   - 單人賽：選擇1位選手
   - 雙人賽：選擇2位選手
   - 三人賽：選擇3位選手
   - 四人賽：選擇4位選手
3. **確認選擇**：選滿人數後自動關閉彈窗

### Step 2: 設定先攻
1. **點擊「先攻」欄位**
2. **選擇先攻隊伍**：
   - 主：主場隊伍先攻
   - 客：客場隊伍先攻

### Step 3: 記錄勝負
1. **確保選手已完成選擇**（否則無法選擇勝負）
2. **點擊「勝負」欄位**
3. **選擇獲勝隊伍**：
   - 主：主場隊伍獲勝
   - 客：客場隊伍獲勝

### Step 4: 飲酒加成（可選）
1. **點擊飲酒加成按鈕**
2. **選擇獲得加成的隊伍**（+5分）
3. **可取消選擇**（再次點擊同一隊伍）

---

## 📊 計分規則

### 基本計分
- **個人賽獲勝**：1分
- **雙人賽獲勝**：2分
- **三人賽獲勝**：3分
- **四人賽獲勝**：4分

### 加成計分
- **勝場加成**：總分較高的隊伍 +1分
- **飲酒加成**：選定隊伍 +5分

### 總分計算
```
總分 = 基本分數 + 勝場加成 + 飲酒加成
```

---

## 🎨 介面指南

### 🟢 按鈕狀態說明
- **白色背景**：尚未選擇
- **灰色背景**：已完成選擇
- **黃色背景**：選手數量不足
- **紅色背景**：主場獲勝/先攻
- **粉紅背景**：客場獲勝/先攻

### 📱 選手選擇彈窗
- **標題**：顯示隊伍名稱和SET資訊
- **選手列表**：點擊選擇/取消選擇
- **藍色背景**：已選中的選手
- **自動關閉**：選滿人數後自動關閉

### 📈 即時試算
- **比賽成績**：根據勝負自動計算
- **勝方加分**：自動判定並加分
- **飲酒加成**：顯示選定的加成
- **總分**：即時更新總分

---

## ⚠️ 注意事項

### 🚫 操作限制
1. **勝負選擇前提**：必須先完成選手選擇
2. **選手重複限制**：同組SET不能重複選手
3. **數據保存警告**：切換比賽前會提醒保存

### 🛡️ 防錯機制
- **未保存警告**：離開頁面時會提醒
- **數據完整性檢查**：保存前檢查所有必填項目
- **重複選手提醒**：違反規則時會彈出警告

### 💾 保存功能
- **完整性檢查**：確保所有SET都已填寫
- **Google Sheets同步**：自動上傳到雲端
- **本地備份**：API失敗時保存到本地
- **成功提示**：顯示保存結果

---

## 🔧 故障排除

### 問題：沒有可用的比賽
**解決方案：**
1. 檢查日期範圍設定
2. 確認Google Sheets連線
3. 查看瀏覽器Console錯誤訊息

### 問題：選手資料載入失敗
**解決方案：**
1. 確認 `data/player.json` 文件存在
2. 檢查文件格式是否正確
3. 重新整理頁面

### 問題：保存失敗
**解決方案：**
1. 檢查網路連線
2. 確認Google Apps Script部署
3. 使用本地存儲備份功能

### 問題：選手重複警告
**解決方案：**
1. 確認同組SET的選手配置
2. 參考重複限制規則
3. 重新選擇不同選手

---

## 📋 操作檢查清單

### ✅ 比賽開始前
- [ ] 確認比賽日期和對戰隊伍正確
- [ ] 檢查選手名單是否完整
- [ ] 測試網路連線和保存功能

### ✅ 記錄過程中
- [ ] 按SET順序依次記錄
- [ ] 確認選手數量符合要求
- [ ] 檢查是否違反重複規則
- [ ] 即時查看分數試算

### ✅ 記錄完成後
- [ ] 檢查所有SET都已填寫
- [ ] 確認總分計算正確
- [ ] 完成最終保存
- [ ] 確認保存成功訊息

---

## 🎯 最佳實踐

### 💡 建議流程
1. **準備階段**：確認比賽資料和選手名單
2. **記錄階段**：依序完成選手→先攻→勝負
3. **檢查階段**：核對分數計算和完整性
4. **保存階段**：確認保存成功

### 🚀 效率技巧
- **快速選擇**：選滿人數後自動關閉彈窗
- **即時預覽**：隨時查看分數變化
- **批量操作**：可同時處理多個SET
- **智能提醒**：系統會自動檢查和提醒

---

## 📞 技術支援

如果遇到問題，請檢查：
1. **瀏覽器Console**：查看詳細錯誤訊息
2. **網路連線**：確保可以訪問Google Sheets
3. **文件完整性**：確認所有必要文件存在

---

*最後更新：2025年6月*
*版本：v1.0* 