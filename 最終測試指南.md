# 最終測試指南

## ✅ 所有問題已修復

### 修復內容

1. **✅ 語法錯誤**：已移除未關閉的註解
2. **✅ Playoffs 按鈕**：全局函數已在 main.js 註冊
3. **✅ 輪播圖白色閃爍**：改用 opacity 淡入淡出
4. **✅ Banner 圖片**：已改回 .png
5. **✅ 防快取 headers**：已添加

---

## 🧪 測試步驟

### 步驟 1：完全清除並重啟

```bash
# 1. 關閉所有瀏覽器分頁
# 2. 在瀏覽器設定中清除「localhost」的所有資料
# 3. 重新打開瀏覽器
```

### 步驟 2：訪問主頁

```
http://localhost:8000/
```

### 步驟 3：點擊「新聞」

應該看到：
- ✅ 輪播圖第一張立即顯示
- ✅ 等待 7 秒後自動切換
- ✅ 切換有淡入淡出效果
- ✅ **無白色閃爍**

### 步驟 4：測試 Playoffs 按鈕

向下滾動，點擊 playoffs.png：
- ✅ 模態窗口應該打開
- ✅ 頁面不會跳動
- ✅ 可以正常關閉

### 步驟 5：檢查 Console

應該看到（無錯誤）：
```
🚀 main.js v2.0 已載入 - 修復版本
✅ Playoffs 模態窗口函數已註冊到全局
🎠 開始初始化照片輪播...
✅ 照片輪播初始化完成，共 6 張照片
```

---

## 🔍 如果還是有問題

### 檢查清單

#### 1. Console 檢查
在 Console 輸入：
```javascript
typeof openPlayoffsModal
```
應該返回：`"function"`

#### 2. 圖片檢查
在 Console 輸入：
```javascript
document.getElementById('carousel-image').src
```
應該返回：包含 `IMG_9918.webp` 的完整路徑

#### 3. 元素檢查
在 Console 輸入：
```javascript
document.getElementById('carousel-image').style.opacity
```
應該返回：`"1"` 或 `""` （不應該是 "0"）

---

## 📊 兩種入口都應該正常

### 入口 1：直接訪問（已確認正常）✅
```
http://localhost:8000/pages/news.html
```
- ✅ Console 顯示正常
- ✅ 輪播圖正常
- ✅ Playoffs 正常

### 入口 2：從主頁進入（剛修復）
```
http://localhost:8000/
→ 點擊「新聞」
```
- ✅ main.js 載入全局函數
- ✅ initializePhotoCarousel() 執行
- ✅ 輪播圖使用 opacity 切換

---

## 🎯 關鍵改進

### main.js 中的修復

#### 1. 全局函數註冊
```javascript
// 在 main.js 開頭
window.openPlayoffsModal = function() { ... };
window.closePlayoffsModal = function() { ... };
```

#### 2. 輪播圖使用 opacity
```javascript
// 淡出
carouselImage.style.opacity = '0';

setTimeout(() => {
    // 更換 src
    carouselImage.src = images[index];
    // 淡入
    carouselImage.style.opacity = '1';
}, 500);
```

#### 3. 移除所有 display: none/block
```javascript
// ❌ 舊代碼
carouselImage.style.display = 'none';
carouselImage.style.display = 'block';

// ✅ 新代碼
carouselImage.style.opacity = '0';
carouselImage.style.opacity = '1';
```

---

## 🎊 預期效果

### 主頁進入流程
```
1. 訪問 http://localhost:8000/
2. main.js 載入 → 註冊全局函數 ✅
3. 點擊「新聞」
4. 載入 news.html 內容
5. initializePhotoCarousel() 執行 ✅
6. 輪播圖顯示 ✅
7. Playoffs 按鈕可用 ✅
```

### 直接訪問流程
```
1. 訪問 http://localhost:8000/pages/news.html
2. news.html 內嵌的 <script> 執行 ✅
3. 註冊全局函數 ✅
4. 輪播圖初始化 ✅
5. 一切正常 ✅
```

---

## 💡 技術說明

### 為什麼主頁需要特別處理？

**主頁架構**：
```html
index.html
  ├── main.js (defer)
  └── <div id="contentArea">
        └── [動態載入 news.html 的內容]
```

**問題**：
- 當用 `innerHTML` 載入 news.html 時
- news.html 中的 `<script>` 標籤**不會執行**
- 這是瀏覽器的安全機制

**解決方案**：
- 在 main.js 中也定義相同的全局函數
- 在 main.js 中初始化輪播圖
- 這樣無論從哪個入口都能正常工作

---

## 📄 最終代碼架構

### 主頁（index.html）
```html
<script src="js/main.js" defer></script>
```

### main.js
```javascript
// 全局函數（供兩種入口使用）
window.openPlayoffsModal = function() { ... };
window.closePlayoffsModal = function() { ... };

// 初始化函數
function initializePhotoCarousel() {
    // 使用 opacity 切換，不用 display
    carouselImage.style.opacity = '0';
    setTimeout(() => {
        carouselImage.src = newSrc;
        carouselImage.style.opacity = '1';
    }, 500);
}
```

### news.html
```html
<script>
    // 也定義全局函數（供直接訪問使用）
    window.openPlayoffsModal = function() { ... };
    window.closePlayoffsModal = function() { ... };
    
    // 輪播圖初始化
    (function initCarousel() { ... })();
</script>
```

**結果**：
- ✅ 從主頁進入：使用 main.js 的函數
- ✅ 直接訪問：使用 news.html 的函數
- ✅ 兩種方式都正常工作

---

## ✅ 完成狀態

| 項目 | 狀態 |
|------|------|
| 語法錯誤修復 | ✅ 完成 |
| 全局函數註冊（main.js）| ✅ 完成 |
| 全局函數註冊（news.html）| ✅ 完成 |
| 輪播圖 opacity 切換 | ✅ 完成 |
| Banner 改回 .png | ✅ 完成 |
| Playoffs 改回 .png | ✅ 完成 |

---

## 🎉 現在應該完全正常了！

請**關閉瀏覽器**，重新打開，然後訪問：

```
http://localhost:8000/
```

點擊「新聞」進行測試！

如果還有問題，請告訴我 Console 中的完整訊息！

