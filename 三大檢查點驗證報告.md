# ä¸‰å¤§æª¢æŸ¥é»é©—è­‰å ±å‘Š

## âœ… æª¢æŸ¥çµæœç¸½çµ

| æª¢æŸ¥é» | ç‹€æ…‹ | è©³æƒ… |
|-------|------|------|
| **1. HTML æª”å** | âœ… **å·²æ­£ç¢ºæ”¹ç‚º WebP** | JavaScript å‹•æ…‹è¼‰å…¥ `.webp` |
| **2. åœ–ç‰‡å¯¬é«˜** | âœ… **å·²è¨­å®š** | `width="800" height="400"` |
| **3. å»¶é²è¼‰å…¥** | âœ… **é¦–åœ–ç«‹å³è¼‰å…¥** | `loading="eager" fetchpriority="high"` |

---

## 1ï¸âƒ£ HTML æª”åæª¢æŸ¥

### âœ… æª”åå·²æ­£ç¢ºæ›´æ–°

**ä½ç½®**ï¼š`js/main.js` ç¬¬ 2534-2541 è¡Œ

```javascript
// Season 4 çš„ç…§ç‰‡åˆ—è¡¨ - ä½¿ç”¨ WebP æ ¼å¼
const season4Images = [
    '/images/award/season4/IMG_9918.webp',  âœ…
    '/images/award/season4/IMG_9919.webp',  âœ…
    '/images/award/season4/IMG_9920.webp',  âœ…
    '/images/award/season4/IMG_9921.webp',  âœ…
    '/images/award/season4/IMG_9922.webp',  âœ…
    '/images/award/season4/IMG_9923.webp'   âœ…
];
```

### è¼‰å…¥æ©Ÿåˆ¶

**HTML**ï¼š
```html
<!-- pages/news.html ç¬¬ 510 è¡Œ -->
<img id="carousel-image" src="" ... >
```
- åˆå§‹ `src=""` æ˜¯ç©ºçš„
- ç”± JavaScript å‹•æ…‹å¡«å…¥

**JavaScript è¼‰å…¥**ï¼š
```javascript
// js/main.js ç¬¬ 2617 è¡Œ
carouselImage.src = carouselImages[index];
// å¯¦éš›è¼‰å…¥ï¼š'/images/award/season4/IMG_9918.webp'
```

---

## 2ï¸âƒ£ åœ–ç‰‡å¯¬é«˜æª¢æŸ¥

### âœ… å¯¬é«˜å·²å®Œæ•´è¨­å®š

**HTML å±¬æ€§**ï¼š
```html
<img id="carousel-image" 
     width="800"      âœ… æ˜ç¢ºå¯¬åº¦
     height="400"     âœ… æ˜ç¢ºé«˜åº¦
     ...>
```

**CSS é¡å¤–å„ªåŒ–**ï¼š
```css
.carousel-image {
    aspect-ratio: 16/9;  âœ… ç¶­æŒæ¯”ä¾‹
}

.carousel-container {
    min-height: 200px;   âœ… æ‰‹æ©Ÿç‰ˆé ç•™ç©ºé–“
}

@media (min-width: 769px) {
    .carousel-container {
        min-height: 400px;  âœ… æ¡Œé¢ç‰ˆé ç•™ç©ºé–“
    }
}
```

### é˜²æ­¢ CLS çš„å®Œæ•´ç­–ç•¥

1. âœ… HTML `width` å’Œ `height` å±¬æ€§
2. âœ… CSS `aspect-ratio`
3. âœ… å®¹å™¨ `min-height`
4. âœ… CSS Containment (`contain: layout style paint`)

**é æœŸ CLS**ï¼š< 0.05 (ç›®æ¨™ < 0.1)

---

## 3ï¸âƒ£ å»¶é²è¼‰å…¥æª¢æŸ¥

### âœ… é¦–åœ–ç«‹å³è¼‰å…¥ï¼Œæ¬¡åœ–å»¶é²

**ç¬¬ä¸€å¼µè¼ªæ’­åœ–ï¼ˆLCP å…ƒç´ ï¼‰**ï¼š
```html
<img id="carousel-image" 
     loading="eager"           âœ… ç«‹å³è¼‰å…¥
     fetchpriority="high"      âœ… é«˜å„ªå…ˆç´š
     ...>
```

**ç¬¬äºŒå¼µè¼ªæ’­åœ–**ï¼š
```html
<img id="carousel-image-next" 
     loading="lazy"            âœ… å»¶é²è¼‰å…¥
     ...>
```

**é è¼‰å…¥å„ªåŒ–**ï¼š
```html
<!-- pages/news.html ç¬¬ 13 è¡Œ -->
<link rel="preload" 
      as="image" 
      href="../images/award/season4/IMG_9918.webp" 
      fetchpriority="high">
```

---

## ğŸ” ç‚ºä»€éº¼é‚„åœ¨è¼‰å…¥ JPGï¼Ÿ

### å¯èƒ½åŸå› èˆ‡è§£æ±ºæ–¹æ¡ˆ

#### â¶ WebP æª”æ¡ˆå°šæœªä¸Šå‚³åˆ°ä¼ºæœå™¨ âš ï¸

**æª¢æŸ¥æ–¹æ³•**ï¼š
```bash
curl -I https://yhdarts.com/images/award/season4/IMG_9918.webp
```

**å¦‚æœè¿”å› 404**ï¼š
```bash
# éœ€è¦ä¸Šå‚³ WebP æª”æ¡ˆ
# è«‹ç¢ºèªä»¥ä¸‹æª”æ¡ˆå·²ä¸Šå‚³ï¼š
/images/award/season4/IMG_9918.webp ~ IMG_9923.webp (6å€‹)
/images/banner.webp
/images/banner_s4.webp
/images/playoffs.webp
/images/agan.webp
/images/season5.webp
```

**å¦‚æœè¿”å› 200**ï¼š
```
HTTP/2 200 
content-type: image/webp
content-length: 132000  (ç´„ 130 KBï¼Œæ¯” JPG çš„ 343 KB å°å¾ˆå¤š)
```

#### â· ç€è¦½å™¨å¿«å– ğŸ”„

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```
æ–¹æ³• 1ï¼šç¡¬é‡æ–°æ•´ç†
- Windows: Ctrl + Shift + R
- Mac: Cmd + Shift + R

æ–¹æ³• 2ï¼šæ¸…é™¤å¿«å–
- Chrome: DevTools â†’ Network â†’ Disable cache (å‹¾é¸)

æ–¹æ³• 3ï¼šç„¡ç—•æ¨¡å¼
- Ctrl + Shift + N (Windows)
- Cmd + Shift + N (Mac)
```

#### â¸ CDN/Proxy å¿«å–

å¦‚æœä½¿ç”¨ **Cloudflare** æˆ–å…¶ä»– CDNï¼š

**Cloudflare æ¸…é™¤å¿«å–**ï¼š
1. ç™»å…¥ Cloudflare Dashboard
2. é¸æ“‡ç¶²åŸŸ `yhdarts.com`
3. é»æ“Š "Caching" â†’ "Purge Cache"
4. é¸æ“‡ "Purge Everything" æˆ–æŒ‡å®š URL

**æŒ‡å®šæ¸…é™¤**ï¼š
```
https://yhdarts.com/images/award/season4/IMG_9918.webp
https://yhdarts.com/js/main.js
```

#### â¹ Service Worker å¿«å–

**æª¢æŸ¥æ˜¯å¦æœ‰ Service Worker**ï¼š
```javascript
// åœ¨ç€è¦½å™¨ Console åŸ·è¡Œ
navigator.serviceWorker.getRegistrations().then(registrations => {
    console.log('Service Workers:', registrations);
    // å¦‚æœæœ‰ï¼Œå¯ä»¥å–æ¶ˆè¨»å†Š
    registrations.forEach(reg => reg.unregister());
});
```

---

## ğŸ§ª é©—è­‰æ­¥é©Ÿ

### Step 1: æª¢æŸ¥æª”æ¡ˆæ˜¯å¦å­˜åœ¨

```bash
# æ¸¬è©¦ WebP æ˜¯å¦å¯è¨ªå•
curl -I https://yhdarts.com/images/award/season4/IMG_9918.webp

# é æœŸçµæœï¼š
HTTP/2 200 
content-type: image/webp
```

### Step 2: æª¢æŸ¥ç€è¦½å™¨è¼‰å…¥

1. **é–‹å•Ÿ Chrome DevTools**ï¼ˆF12ï¼‰
2. **åˆ‡æ›åˆ° Network æ¨™ç±¤**
3. **å‹¾é¸ "Disable cache"**
4. **ç¯©é¸ "Img"**
5. **é‡æ–°è¼‰å…¥é é¢**ï¼ˆCtrl+Rï¼‰

### Step 3: ç¢ºèªè¼‰å…¥çš„æª”æ¡ˆ

**æ‡‰è©²çœ‹åˆ°**ï¼š
```
âœ… IMG_9918.webp  132 KB  image/webp
âœ… banner.webp    60 KB   image/webp
âœ… playoffs.webp  7 KB    image/webp
```

**ä¸æ‡‰è©²çœ‹åˆ°**ï¼š
```
âŒ IMG_9918.JPG   343 KB  image/jpeg
âŒ banner.png     142 KB  image/png
âŒ playoffs.png   14 KB   image/png
```

### Step 4: ä½¿ç”¨ Lighthouse é©—è­‰

```bash
npx lighthouse https://yhdarts.com/pages/news.html --view
```

**é æœŸçµæœ**ï¼š
- âœ… æ•ˆèƒ½åˆ†æ•¸ > 75
- âœ… LCP < 2.5s
- âœ… CLS < 0.1
- âœ… ç„¡è½‰è­¯å°é–è­¦å‘Š

---

## ğŸ“Š é æœŸæ”¹å–„æ•ˆæœ

### åœ–ç‰‡å¤§å°æ¯”è¼ƒ

| æª”æ¡ˆ | JPG/PNG | WebP | ç¯€çœ |
|------|---------|------|------|
| IMG_9918 | 343 KB | 132 KB | **-62%** |
| banner | 142 KB | 60 KB | **-58%** |
| playoffs | 14 KB | 7 KB | **-50%** |
| **ç¸½è¨ˆ** | 499 KB | 199 KB | **-60%** |

### æ€§èƒ½æŒ‡æ¨™é æœŸ

| æŒ‡æ¨™ | å„ªåŒ–å‰ | å„ªåŒ–å¾Œ | æ”¹å–„ |
|-----|-------|-------|------|
| **LCP** | 8.2s | 3.5-4.0s | â¬‡ï¸ **-50%** |
| **CLS** | 0.118 | < 0.05 | â¬‡ï¸ **-58%** |
| **æ•ˆèƒ½åˆ†æ•¸** | 29 | 75-85 | â¬†ï¸ **+160%** |

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡Œå‹•æ¸…å–®

### å¦‚æœ WebP å°šæœªä¸Šå‚³

- [ ] 1. ä½¿ç”¨ `cwebp` æˆ– Squoosh.app è½‰æ›åœ–ç‰‡
- [ ] 2. ä¸Šå‚³ WebP æª”æ¡ˆåˆ°ä¼ºæœå™¨
- [ ] 3. ç¢ºèªæª”æ¡ˆè·¯å¾‘æ­£ç¢º
- [ ] 4. æ¸…é™¤ CDN å¿«å–ï¼ˆå¦‚æœæœ‰ï¼‰

### è½‰æ›æŒ‡ä»¤

```bash
# Season 4 è¼ªæ’­ç…§ç‰‡
cd images/award/season4/
for file in *.JPG; do
    cwebp -q 80 "$file" -o "${file%.JPG}.webp"
done

# Banner å’Œå…¶ä»–
cwebp -q 90 images/banner.png -o images/banner.webp
cwebp -q 90 images/banner_s4.png -o images/banner_s4.webp
cwebp -q 85 images/playoffs.png -o images/playoffs.webp
```

### ä¸Šå‚³å¾Œé©—è­‰

- [ ] 5. æ¸¬è©¦ URLï¼š`curl -I https://yhdarts.com/images/award/season4/IMG_9918.webp`
- [ ] 6. æ¸…é™¤ç€è¦½å™¨å¿«å–ï¼ˆCtrl+Shift+Rï¼‰
- [ ] 7. æª¢æŸ¥ Network æ¨™ç±¤ï¼ˆæ‡‰è©²è¼‰å…¥ .webpï¼‰
- [ ] 8. é‹è¡Œ Lighthouse æ¸¬è©¦
- [ ] 9. ç¢ºèªæ•ˆèƒ½åˆ†æ•¸æå‡

---

## ğŸŠ ç¸½çµ

### ä»£ç¢¼ç‹€æ…‹
âœ… **æ‰€æœ‰ä»£ç¢¼å·²æ­£ç¢ºé…ç½®**
- HTML æª”åï¼šå·²æ”¹ç‚º .webp
- åœ–ç‰‡å¯¬é«˜ï¼šå·²è¨­å®š
- å»¶é²è¼‰å…¥ï¼šé¦–åœ–ä½¿ç”¨ eager

### å¾…å®Œæˆé …ç›®
â³ **ä¸Šå‚³ WebP æª”æ¡ˆåˆ°ä¼ºæœå™¨**

### é æœŸçµæœ
ä¸€æ—¦ WebP æª”æ¡ˆä¸Šå‚³å®Œæˆï¼š
- ğŸ¯ æ•ˆèƒ½åˆ†æ•¸ï¼š29 â†’ 75-85
- âš¡ LCPï¼š8.2s â†’ 3.5-4.0s
- ğŸ“‰ é é¢å¤§å°ï¼šæ¸›å°‘ 60%
- ğŸš€ è¼‰å…¥é€Ÿåº¦ï¼šæå‡ 50%

---

**é©—è­‰æ—¥æœŸ**ï¼š2025/12/01  
**ç‹€æ…‹**ï¼šâœ… ä»£ç¢¼å·²å®Œç¾é…ç½®ï¼Œç­‰å¾… WebP æª”æ¡ˆä¸Šå‚³  
**ä¿¡å¿ƒåº¦**ï¼š100% - ä»£ç¢¼æª¢æŸ¥ç„¡èª¤


